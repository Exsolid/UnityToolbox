<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UnityToolbox: Terrain Generation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo-Scaled.PNG"/></td>
  <td id="projectalign">
   <div id="projectname">UnityToolbox
   </div>
   <div id="projectbrief">Brief documentation for all existing scripts.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_terrain_generation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Terrain Generation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="TerrainGenerationExample.png" alt="" width="1000px"/>
</div>
<h1><a class="anchor" id="TerrainGenerationOverview"></a>
Overview</h1>
<ul>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationGeneral">General Usage</a></li>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationSettings">Settings</a><ul>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationGeneralHeightData">Height Data</a></li>
</ul>
</li>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationTypes">Procedural Generation Types</a><ul>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationCA">Cellular Automata</a></li>
</ul>
</li>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationMeshTypes">Mesh Generation Types</a><ul>
<li><a class="el" href="_terrain_generation.html#TerrainGenerationLayered">Layered Mesh Generation</a></li>
</ul>
</li>
</ul>
<p>The prerequisites for using this system are:</p><ul>
<li>The <a class="el" href="index.html#GeneralSetupManagerSystem">Manager System</a>.</li>
</ul>
<h1><a class="anchor" id="TerrainGenerationSettings"></a>
Settings</h1>
<p>To use the terrain generation, one can open the Terrain Generation window via the menu bar "UnityToolbox" -&gt; "Terrain Generation":</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Menu Bar    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationMenu.png" alt="" width="200px"/>
</div>
  </td></tr>
</table>
<p>Here you will be prompted to enter a directory, which will be used to store the required data.<br  />
This directory must be within a "Resource" folder and can be changed via the <b>Settings</b> tab:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Settings Tab    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationSettings.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<h1><a class="anchor" id="TerrainGenerationGeneral"></a>
General Usage</h1>
<p>The terrain generation is built to combine different procedural generation algorithms with different mesh generation algorithms.<br  />
The generation tab contains all general information of the created generator. Here selected generators can be deleted with <b>-</b> and added with <b>+</b>.<br  />
To change the name of a generator, use the same text field and press <b>Save/Rename</b> at the bottom of the window.<br  />
</p>
<p>Additionally, the <a class="el" href="_terrain_generation.html#TerrainGenerationTypes">Procedural Generation Types</a> can be set to define the basis of the generation.<br  />
The settings for the generation type will then appear below.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Generation Tab    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationGenTab.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>The mesh tab offers a selection of <a class="el" href="_terrain_generation.html#TerrainGenerationMeshTypes">Mesh Generation Types</a>. The settings of the selected type will then also appear below.<br  />
The generation settings can be tested beforehand with the <b>Generate Example With Static Size</b> button. <br  />
As the name suggests, the any size related values are static account.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Mesh Tab    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationMeshTab.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>When creating terrain within the editor, the shader data is serialized to the set "Resources" folder.<br  />
If it is created at runtime, no data will be saved. Therefore, if the scene is reloaded and no data is created beforehand, the terrain will be displayed incorrectly.</p>
<p>To create terrain, the script <a class="el" href="class_unity_toolbox_1_1_gameplay_features_1_1_procedural_generation_1_1_terrain_1_1_terrain_generation.html">Terrain Generation</a> must be added to a game object.<br  />
It requires a material, which runs on the <b>TerrainShader</b>. The following texture data is explained under following sub section.<br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Terrain Generation Script    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationScript.png" alt="" width="300px"/>
</div>
  </td></tr>
</table>
<p>The terrain object parents the created game objects. Setting the ground layer is required for the asset placement to work.<br  />
Now the <b>Generate Terrain</b> button can be clicked, or <a class="el" href="class_unity_toolbox_1_1_gameplay_features_1_1_procedural_generation_1_1_terrain_1_1_terrain_generation.html">TerrainGeneration.GenerateTerrain()</a> can be executed to create the terrain with set data.</p>
<h2><a class="anchor" id="TerrainGenerationGeneralHeightData"></a>
Height Data</h2>
<p>Lastly, each mesh generation type contains settings to define height data. This data contains information on how the terrain shader should render the mesh.<br  />
The layers are adjusted by height and have various settings for the texturing.<br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Height Data Window    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationHeightData.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>All textured used here must also be saved within a resources folder. Once deleted or moved outside of a resources folder, an error window will pop up, notifying you of the missing data.<br  />
The error window can only be closed once data is reestablished and saved.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Error Window    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationErrorWindow.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>Additionally these textures must be set to enable <b>Read/Write</b> and have their <b>Max Size</b> equal to the size set within the <a class="el" href="class_unity_toolbox_1_1_gameplay_features_1_1_procedural_generation_1_1_terrain_1_1_terrain_generation.html">Terrain Generation</a> script.<br  />
A low texture size value is recommended if many textures are used, as the shader might run out of memory, resulting in wrong looking terrain otherwise.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Texture Settings    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationScriptTextureSettings.png" alt="" width="300px"/>
</div>
   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationScriptTexture.png" alt="" width="300px"/>
</div>
  </td></tr>
</table>
<p>The texture format can mostly be set to anything corresponding to the texture, but it is recommended to use the format <b>RGBA32</b>.<br  />
 </p>
<h1><a class="anchor" id="TerrainGenerationTypes"></a>
Procedural Generation Types</h1>
<p>Currently the following generation types exist. They define the base structure of the then generated mesh.</p>
<h2><a class="anchor" id="TerrainGenerationCA"></a>
Cellular Automata</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Cellular_automaton">Cellular Automata</a> defines a set of rules for each cell within the grid.<br  />
The rules can be adjusted with the following values.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Cellular Automata Example Values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationCA.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>The <b>Iteration Count</b> defines how often the algorithm should run through the grid with defined <b>Size for X &amp; Y</b>.<br  />
Initially the grid is filled with random values, dependent on the <b>Fill Percentage</b>.</p>
<h1><a class="anchor" id="TerrainGenerationMeshTypes"></a>
Mesh Generation Types</h1>
<p>Currently the following mesh generation types exist. They generate on basis of the grid defined beforehand.<br  />
 </p>
<h2><a class="anchor" id="TerrainGenerationLayered"></a>
Layered Mesh Generation</h2>
<p>The layered mesh generation uses the floor layer of the generated grid as a basis. The wall values will be stacked with layers until either no space or layer is left.<br  />
Different layers can be chosen to define how the layers are generated, although currently only a default ground layer can be selected.<br  />
Each layer defines height data for the terrain shader, and asset data, clustered and single. Additionally general settings can be found for the generation type and layers.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Layered Header    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationLayeredHeader.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>The <b>Size Between Vertices</b> defines how much space should be between each generated vertex. Higher values result in a more stretched out mesh.<br  />
The <b>Vertex Multiplier</b> adds filler values between each generated value by the grid generation. Higher values result in a more defined mesh.<br  />
The <b>Noise For Asset Position</b> adds randomness to the asset placement. The randomness cannot exceed above or below the other vertices. Other than the <b>Enable Asset Placement</b> option, which is useful to adjust the mesh itself without removing asset placement settings, the other settings are options for the height data.<br  />
These options are usually within the height data itself, but are generalized for the layered generation.<br  />
Below layers can be added and defined.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Layered Layer    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationLayeredLayerHeader.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>The <b>Cliff Height</b> defines how high the layer should be, calculated from the last layer. The Base Layer cannot be changed.<br  />
The <b>Noise Ground</b> value defines how much noise the ground should have. Higher values result in rougher terrain.<br  />
The <b>Height Colors</b> define the height data for the layer. Although it is set for the layer, the blend factor will blend into the layer below.<br  />
Additionally setting the first height layer to a non zero starting height will lead to the previous height data layer to go above its own ground layer.<br  />
</p>
<p>Lastly the assets can be set. There are two different kinds of asset spawns. The default <b>Single</b> asset placement, which places an asset for each vertex depending on the odds, and the <b>Clustered</b> asset placement.<br  />
The last will also place <b>Single</b> assets going for its original position and spreading out, resulting in a cluster of assets.<br  />
The <b>Percentage For No Asset</b> defines whether an asset should be selected at all for a given vertex.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Single Asset    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationLayeredSingleAsset.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>The <b>Single</b> asset contains the prefab which will be placed.<br  />
If <b>Check For Space On Placement</b> is enabled the asset will only be placed if no other asset with the same setting is present.<br  />
If <b>Disable Raycast Placement</b> is enabled, then the asset will simply be placed with its offset. <br  />
The raycast placement places the smaller asset with rotation based on the ground levels around it and otherwise on the lowest level.<br  />
Additionally, if the prefab contains children, all children will be parented to the mesh, disbanding the prefab structure.<br  />
The <b>Pre Iterate</b> option will place assets in an earlier iteration of the asset placement. This is useful for ground coverage like grass. <br  />
The <b>Height Offset</b> will place the asset with an offset. <br  />
The <b>Position on Layer</b> will define whether the asset will be placed on the ground or cliff side of a layer.<br  />
 The <b>Odds For Spawn</b> will adjust the odds for the spawn. These odds are not percentages.<br  />
 The selection of a asset will depend on the <b>Position on Layer</b> of each asset. If only one asset is set to spawn on cliffs, this asset will be selected 100% of the time, if a selection takes place.<br  />
If only one asset is set to <b>Pre Iterate</b>, this asset will also be selected 100% of the time, if a selection takes place.<br  />
 The odds for each case, will be added up. Two ground placed assets with the odds 1 and 6, will result in the odds 1/7 and 6/7.<br  />
If the odds need to be toned down for only one case, instead of for all via the <b>Percentage For No Asset</b>, then a <b>Single</b> asset placement can be created containing an empty prefab.<br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Empty Asset    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationLayeredEmptyAsset.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>The <b>Clustered</b> asset placement can contain multiple <b>Single</b> assets, which are placed in a cluster.<br  />
The <b>Odds for Spawn</b> of the contained assets will only be internal to the cluster.<br  />
If a cluster is selected, at least one asset of the cluster will always be spawned.<br  />
For the surrounding vertices, the odds are reduced by the <b>Spawn Percentage Decay</b>. This is repeated until all odds are gone.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Clustered Asset    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><div class="image">
<img src="TerrainGenerationLayeredClusteredAsset.png" alt="" width="500px"/>
</div>
  </td></tr>
</table>
<p>One must be warned, as this placement is recursive, that if the placement odds are not adjusted or high in general, the script will run a long time.<br  />
Having only one <b>Clustered</b> asset placement with a <b>Percentage For No Asset</b> of 0 and mesh size of 100 vertices on X &amp; Y, will lead to a runtime of (100 * 100)^x, with x being dependent on the <b>Spawn Percentage Decay</b>! <br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 13 2024 for UnityToolbox by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
